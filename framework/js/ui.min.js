/**
 * framework-ui - 后台数据管理界面UI及JavaScript-MVC框架
 * @version v1.0.1
 * @author atomzerolee
 * @url git+https://github.com/atomzerolee/framework-ui.git
 * @package private
 * @license Apache-2.0
 */
define(function(require, exports, module) {
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("underscore"),require("jquery"),require("nunjucks")):"function"==typeof define&&define.amd?define(["underscore","jquery","nunjucks"],t):"object"==typeof exports?exports.UI=t(require("underscore"),require("jquery"),require("nunjucks")):e.UI=t(e.underscore,e.jquery,e.nunjucks)}("undefined"!=typeof self?self:this,function(e,t,n){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n(1),u=/\s+/,l=function(e,t,n,i){if(!n)return!0;if("object"===(void 0===n?"undefined":o(n))){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(u.test(n)){for(var s=n.split(u),l=0,a=s.length;l<a;l++)e[t].apply(e,[s[l]].concat(i));return!1}return!0},a=function(e,t){var n=void 0,i=-1,r=e.length;switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,t[0]);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,t[0],t[1]);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,t[0],t[1],t[2]);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t);return}},c=function(){function e(){i(this,e)}return r(e,[{key:"on",value:function(e,t,n){return l(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this}},{key:"once",value:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var i=this,r=s.once(function(){i.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,n)}},{key:"off",value:function(e,t,n){if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events=void 0,this;for(var i=e?[e]:s.keys(this.events),r=0,o=i.length;r<o;r++){e=i[r];var u=this._events[e];if(u)if(t||n){for(var a=[],c=0,f=u.length;c<f;c++){var h=u[r];(t&&t!==h.callback&&t!==h.callback._callback||n&&n!==h.context)&&a.push(h)}a.length?this._events[e]=a:delete this._events[e]}else delete this._events[e]}return this}},{key:"emit",value:function(e){if(!this._events)return this;var t=[].slice.call(arguments,1);if(!l(this,"emit",e,t))return this;var n=this._events[e],i=this._events.all;return n&&a(n,t),i&&a(i,arguments),this}},{key:"listenTo",value:function(e,t,n){var i=this._listeningTo||(this._listeningTo={});return e._listenId||(e._listenId=s.uniqueId("l")),i[e._listenId]=e,n||"object"!==(void 0===t?"undefined":o(t))||(n=this),e.on(t,n,this),this}},{key:"listenToOnce",value:function(e,t,n){if("object"===(void 0===t?"undefined":o(t))){for(var i in t)this.listeningToOnce(e,i,i,t[i]);return this}if(u.test(t)){for(var r=t.split(u),l=0,a=r.length;l<a;l++)this.listenToOnce(e,r[l],n);return this}if(!n)return this;var c=this,f=s.once(function(){c.stopListening(e,t,f),n.apply(this,arguments)});return f._callback=n,this.listenTo(e,t,f)}},{key:"stopListening",value:function(e,t,n){var i=this._listeningTo;if(!i)return this;var r=!t&&!n;n||"object"!==(void 0===t?"undefined":o(t))||(n=this),e&&(i={},i[e._listenId]=e);for(var u in i)e=i[u],t||n?e.off(t,n,this):e.off(),(r||s.isEmpty(e._events))&&delete this._listeningTo[u];return this}}]),e}();c.prototype.bind=c.prototype.on,c.prototype.unbind=c.prototype.off,e.exports=c},function(t,n){t.exports=e},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(1),a=n(0),c=n(5),f=n(3),h=function(e,t,n){var i={};return null!=e&&("object"===(void 0===e?"undefined":u(e))?(i=e,n=t):i[e]=t,[i,n||(n={})])},p=function(e){function t(e,n){i(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),s=e||{},u=l.extend({},n);return o.mid=l.uniqueId("m"),o.attributes={},o.changed={},u.collection&&(o.collection=n.collection),s=l.defaults({},s,l.result(o,"defaults")),o.set(s,u),o.initialize.apply(o,arguments),o}return o(t,e),s(t,[{key:"isNew",value:function(){return!this.has(this.mainkey)}},{key:"toJSON",value:function(){return l.clone(this.attributes)}},{key:"clone",value:function(){return new this.constructor(this.attributes)}},{key:"has",value:function(e){return null!=this.get(e)}},{key:"matches",value:function(e){return l.matches(e)(this.attributes)}},{key:"hasChanged",value:function(e){return null==e?!l.isEmpty(this.changed):l.has(this.changed,e)}},{key:"previous",value:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null}},{key:"previousAttributes",value:function(){return l.clone(this._previousAttributes)}},{key:"diff",value:function(e){if(!e)return!!this.hasChanged()&&l.clone(this.changed);var t={};for(var n in e){var i=e[n];l.isEqual(i,this.attributes[n])||(t[n]=i)}return!!l.size(t)&&t}},{key:"set",value:function(e,t,n){var i=h.apply(null,arguments),r=i.shift();if(n=i.shift(),!r)return this;n.parse&&(r=this.parse(r)),this.changed={},this._previousAttributes=l.clone(this.attributes);var o=[];for(e in r)t=r[e],l.isEqual(t,this.attributes[e])||o.push(e),l.isEqual(t,this._previousAttributes[e])?delete this.changed[e]:this.changed[e]=t,n.unset?delete this.attributes[e]:this.attributes[e]=t;if(!n.silent){for(var s=0,u=o.length;s<u;s++){var a=o[s];this.emit("change:"+a,this,this.attributes[a],n)}for(o.length>0&&(this._pending=!0);this._pending;)this._pending=!1,this.emit("change",this,n)}return this}},{key:"unset",value:function(e,t){return this.set(attr,void 0,l.extend({},t,{unset:!0}))}},{key:"clear",value:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,void 0,l.extend({},e,{unset:!0}))}},{key:"get",value:function(e){return this.attributes[e]}},{key:"escape",value:function(e){return l.escape(this.get(e))}},{key:"url",value:function(){var e=l.result(this,"urlRoot")||l.result(this.collection,"url")||c.urlError();if(this.isNew())return e;var t=this.get(this.mainkey);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)}},{key:"sync",value:function(){return f.apply(this,arguments)}},{key:"fetch",value:function(e){var t=this,n=function(n){null!=n&&t.set(n,e),t.emit("sync",t,n,e)};return this.sync("read",this,n,e)}},{key:"save",value:function(e,t,n){var i=this,r=h.apply(null,arguments);n=n||{};this.attributes;r&&!n.delay&&this.set(r,n);var o=function(e){null!=e&&(n.delay?i.set(e):i.set(i.mainkey,e[i.mainkey],{silent:!0})),i.emit("sync",i,e,n)},s=this.isNew()?"create":n.patch?"patch":"update";return"patch"===s&&(n.data=r),this.sync(s,this,o,n)}},{key:"destroy",value:function(e){var t=this;e||(e={});var n=function(){t.stopListening(),t.emit("destroy",t,t.collection,e)},i=function(i){e.delay&&n(),t.isNew()||t.emit("sync",t,i,e),t.off()};return e.delay||n(),this.isNew()?this.off():this.sync("delete",this,i,e)}},{key:"initialize",value:function(){}},{key:"parse",value:function(e){return e}}],[{key:"isModel",value:function(e){return e instanceof t}}]),t}(a);p.prototype.mainkey="id";var y=["keys","values","pairs","invert","pick","omit","chain","isEmpty"];l.each(y,function(e){l[e]&&(p.prototype[e]=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this.attributes),l[e].apply(l,t)})}),e.exports=p},function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(4),o=n(5),s={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"},u=function e(t,n,i,u){var l=s[t];_.defaults(u||(u={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:l,dataType:"json"};if(!u.url){var c=e.host||"";a.url=_.result(n,"url")||o.urlError(),a.url=c+a.url}if(null!=u.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(n.toJSON())),u.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),u.emulateHTTP&&("PUT"===l||"DELETE"===l||"PATCH"===l)){a.type="POST",u.emulateJSON&&(a.data._method=l);var f=u.beforeSend;u.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",l),f)return f.apply(this,arguments)}}"GET"===a.type||u.emulateJSON||(a.processData=!1),u.error=function(t,i,r){u.textStatus=i,u.errorThrown=r,e.onError.call(null,t,i,r),n.emit("error",t,i,r)},u.dataFilter=e.onData,_.isFunction(i)&&(u.success=i);var h=r.ajax(_.extend(a,u));return n.emit("request",n,h,u),h};u.emulateHTTP=!1,u.emulateJSON=!1,u.onData=function(e,t){return console.log(void 0===e?"undefined":i(e)),e},u.onError=function(e,t,n){throw new Error("UI.sync Capture an ajax's error: "+t)},e.exports=u},function(e,n){e.exports=t},function(e,t,n){"use strict";e.exports={urlError:function(){throw new Error('A "url" property or function must be specified')}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(1),l=n(2),a=n(0),c=n(3),f=function(e,t){if(null!=e){t=u.extend({},t),t.parse&&!l.isModel(e)&&(e=this.parse(e,t)||{});return[u.isArray(e)?e:[e],t]}},h=function(e,t,n){n=Math.min(Math.max(n,0),e.length);for(var i=Array(e.length-n),r=t.length,o=0;o<i.length;o++)i[o]=e[o+n];for(var s=0;s<r;s++)e[s+n]=t[s];for(var u=0;u<i.length;u++)e[u+r+n]=i[u]},p=function(e){function t(e,n){i(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n||(n={}),void 0!=n.comparator&&(o.comparator=n.comparator),o._reset(),o.initialize.apply(o,arguments),e&&o.reset(e,u.extend({silent:!0},n)),o}return o(t,e),s(t,[{key:"_reset",value:function(){this.length=0,this.models=[],this._ref={}}},{key:"_addReference",value:function(e){this._ref[e.mid]=e;var t=this.modelId(e.attributes);null!=t&&(this._ref[t]=e),e.on("all",this._onModelEvent,this)}},{key:"_removeReference",value:function(e){delete this._ref[e.mid];var t=this.modelId(e.attributes);null!=t&&delete this._ref[t],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)}},{key:"_onModelEvent",value:function(e,t,n,i){if(t){if(("add"===e||"remove"===e)&&n!==this)return;if("destroy"===e&&this.remove(t,i),"change"===e){var r=this.modelId(t.previousAttributes()),o=this.modelId(t.attributes);r!==o&&(null!=r&&delete this._ref[r],null!=o&&(this._ref[o]=t))}}this.emit.apply(this,arguments)}},{key:"_prepareModel",value:function(e,t){return l.isModel(e)?(e.collection||(e.collection=this),e):(t=u.extend({collection:this},t),new this.model(e,t))}},{key:"_removeModels",value:function(e,t){for(var n=[],i=0;i<e.length;i++){var r=this.get(e[i]);if(r){var o=this.indexOf(r);this.models.splice(o,1),this.length--,delete this._ref[r.cid];var s=this.modelId(r.attributes);null!=s&&delete this._ref[s],t.silent||(t.index=o,r.emit("remove",r,this,t)),n.push(r),this._removeReference(r,t)}}return n}},{key:"toJSON",value:function(){return this.map(function(e){return e.toJSON()})}},{key:"modelId",value:function(e){return e[this.model.prototype.mainkey]}},{key:"slice",value:function(){return Array.prototype.slice.apply(this.models,arguments)}},{key:"pluck",value:function(e){return u.invoke(this.models,"get",e)}},{key:"has",value:function(e){return null!=this.get(e)}},{key:"reset",value:function(e,t){t=t?u.clone(t):{};for(var n=0;n<this.models.length;n++){var i=this.models[n];this._removeReference(i)}return this._reset(),e=this.add(e,u.extend({silent:!0},t)),t.silent||this.emit("reset",this,t),this}},{key:"add",value:function(e,t){var n=f.apply(this,arguments);e=n.shift(),t=n.shift();var i=[],r=null!=t.at?+t.at:void 0;r<0&&(r+=this.length+1);for(var o=0,s=void 0;o<e.length;o++){s=e[o];this.get(s)||(s=this._prepareModel(s,t))&&(i.push(s),this._addReference(s,t))}if(i.length>0&&(h(this.models,i,null==r?this.length:r),this.length=this.models.length),!t.silent)for(var u=0;u<i.length;u++)null!=r&&(t.index=r+u),s=i[u],s.emit("add",s,this,t);return this}},{key:"set",value:function(e,t){var n=f.apply(this,arguments);e=n.shift(),t=n.shift();for(var i=0,r=void 0,o=[];i<e.length;i++){r=e[i];var s=this.get(r);if(s&&r!==s){delete r.mid;var u=l.isModel(r)?r.attributes:r;s.set(u,t),o.push(s)}}return this}},{key:"remove",value:function(e,t){var n=f.apply(this,arguments);return e=n.shift(),t=n.shift(),this._removeModels(e,t)}},{key:"get",value:function(e){if(null!=e)return this._ref[e]||this._ref[this.modelId(e.attributes||e)]||e.mid&&this._ref[e.mid]}},{key:"at",value:function(e){return e<0&&(e+=this.length),this.models[e]}},{key:"where",value:function(e,t){var n=u.matcher(e);return this[t?"find":"filter"](function(e){return n(e.attributes)})}},{key:"sync",value:function(){return c.apply(this,arguments)}},{key:"fetch",value:function(e){var t=this;e=u.extend({parse:!0},e);var n=function(n){null!=n&&t.reset(n,e),t.emit("sync",t,n,e)};return this.sync("read",this,n,e)}},{key:"create",value:function(e,t){if(t=t?u.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.delay||this.add(e,t);return e.save(null,t),e}},{key:"initialize",value:function(){}},{key:"parse",value:function(e){return e}}],[{key:"isCollection",value:function(e){return e instanceof t}}]),t}(a),y=["filter","find","indexOf","last","first","each","map","chain"],v=["groupBy","countBy","sortBy","indexBy"];u.each(y,function(e){u[e]&&(p.prototype[e]=function(){var t=Array.prototype.slice.apply(arguments);return t.unshift(this.models),u[e].apply(u,t)})}),u.each(v,function(e){u[e]&&(p.prototype[e]=function(t,n){var i=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,i,n)})}),p.splice=h,e.exports=p},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(9),l=n(0),a=n(4),c=n(2),f=n(6),h=["template","model","collection","el","id","attributes","className","tagName"],p=/^.*\.(njk)$/,y=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e||(e=_.extend({},e)),n.vid=_.uniqueId("v"),_.extend(n,_.pick(e,h)),n._ensureElement(),n.initialize.apply(n,arguments),e.unbind||n._bindEvents(),n}return o(t,e),s(t,[{key:"_createElement",value:function(e){return document.createElement(e)}},{key:"_ensureElement",value:function(){if(this.el)this._setElement(_.result(this,"el"));else{var e=_.extend({},_.result(this,"attributes"));this.id&&(e.id=_.result(this,"id")),this.className&&(e.class=_.result(this,"className")),this._setElement(this._createElement(_.result(this,"tagName"))),this._setAttributes(e)}}},{key:"_setAttributes",value:function(e){this.$el.attr(e)}},{key:"_setElement",value:function(e){this.$el=e instanceof a?e:a(e),this.el=this.$el[0]}},{key:"_removeElement",value:function(){this.$el.remove()}},{key:"$",value:function(e){return this.$el.find(e)}},{key:"remove",value:function(){return this.stopListening(),this._removeElement(),this}},{key:"_bindEvents",value:function(){c.isModel(this.model)&&this.listenTo(this.model,"change",this.render),f.isCollection(this.collection)&&(this.listenTo(this.collection,"change",this.render),this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"remove",this.render),this.listenTo(this.collection,"add",this.render))}},{key:"compile",value:function(e){var t=this.model&&this.model.toJSON(),n=this.collection&&this.collection.toJSON();return null!=(e=_.clone(e)||t||n)&&p.test(this.template)?(e=this.parse(e),this.env.render(this.template,_.isArray(e)?{data:e}:e)):null}},{key:"render",value:function(){var e=this.compile();return null!=e&&this.$el.html(e),this.$el}},{key:"parse",value:function(e){return e}},{key:"initialize",value:function(){}}],[{key:"isView",value:function(e){return e instanceof t}}]),t}(l);y.prototype.env=new u.Environment,y.prototype.tagName="div",e.exports=y},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(1),l=n(0),a=n(2),c=n(6),f=n(7),h=n(10),p=n(3),y=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.Model=a,e.Collection=c,e.View=f,e.Controller=h,e.sync=p,e.Model.extend=e.Collection.extend=e.View.extend=e.Controller.extend=e.extends,e}return o(t,e),s(t,[{key:"extends",value:function(e,t){var n=this,i=void 0;return i=e&&u.has(e,"constructor")?e.constructor:function(){return n.apply(this,arguments)},u.extend(i,n,t),i.prototype=u.create(n.prototype,e),i.prototype.constructor=i,i.__super__=n.prototype,i}}]),t}(l);e.exports=new y,window&&(window.UI=e.exports)},function(e,t){e.exports=n},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=(n(4),n(0)),l=n(7),a=/^(\S+)\s*(.*)$/,c=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.initialize.apply(e,arguments),l.isView(e.view)&&!e._unbind&&e.delegateEvents(),e}return o(t,e),s(t,[{key:"delegateEvents",value:function(e){if(e||(e=_.result(this,"events")),!e)return this;this.undelegateEvents();for(var t in e){var n=e[t];if(_.isFunction(n)||(n=this[n]),n){var i=t.match(a);this.delegate(i[1],i[2],_.bind(n,this))}}}},{key:"delegate",value:function(e,t,n,i){return i=_.clone(i)||i,this.view.$el.on(e+".delegateEvents"+this.view.vid,t,i,n),this}},{key:"undelegateEvents",value:function(){return this.view.$el&&this.view.$el.off(".delegateEvents"+this.view.cid),this}},{key:"undelegate",value:function(e,t,n){return this.view.$el.off(e+".delegateEvents"+this.cid,t,n),this}},{key:"destroy",value:function(){this.undelegateEvents(),this.stopListening(),this.view=null}},{key:"initialize",value:function(){}}]),t}(u);e.exports=c}])});
})